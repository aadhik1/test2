pipeline {
    agent  any
    environment{
        MY_DIR = 'subdir'
    }
    stages {
        stage('Clone app repo') {
            steps {
               GIT_BRANCH_LOCAL = sh ( script: "echo $Branch | sed -e 's|origin/||g'",returnStdout: true).trim()
               echo "Git branch: ${GIT_BRANCH_LOCAL}"
                
               git 'https://github.com/aadhik1/test.git'
                
            }
        }
        stage('Clone Middleware repo') {
            steps {
                sh '[ -d \'subdir\' ] && rm -rf subdir'
                sh 'mkdir  subdir'
                dir ('subdir'){
                git 'https://github.com/aadhik1/test3.git'}
            }
        }
        
     }
}
